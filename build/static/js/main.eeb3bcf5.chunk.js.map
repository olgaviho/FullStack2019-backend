{"version":3,"sources":["components/Name.js","components/Form.js","components/LookForm.js","services/persons.js","App.js","index.js"],"names":["Name","props","react_default","a","createElement","name","number","onClick","deletePerson","AddForm","onSubmit","addName","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","LookForm","newLookFor","handleLookForChange","services_persons","axios","get","then","response","data","newObject","post","id","delete","concat","personObject","put","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewLookFor","_useState9","text","_useState10","messageToUser","setMessageToUser","useEffect","personService","initialPersons","window","confirm","filter","person","components_LookForm","event","target","message","className","style","Form","preventDefault","nameObject","length","toConsumableArray","sort","b","date","Date","toISOString","ok","forEach","createdPerson","setTimeout","catch","error","find","p","changedPerson","objectSpread","returnedPerson","map","tyyppi","console","log","toLowerCase","includes","components_Name","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"qNAceA,EAZF,SAACC,GAGZ,OACEC,EAAAC,EAAAC,cAAA,UAAKH,EAAMI,KAAKA,KAAhB,IAAuBJ,EAAMI,KAAKC,OAChCJ,EAAAC,EAAAC,cAAA,UAAQG,QAAS,kBAAMN,EAAMO,aAAaP,EAAMI,QAAhD,YCWSI,EAhBC,SAACR,GACf,OACEC,EAAAC,EAAAC,cAAA,QAAMM,SAAUT,EAAMU,SACpBT,EAAAC,EAAAC,cAAA,oBACQF,EAAAC,EAAAC,cAAA,SAAOQ,MAAOX,EAAMY,QAASC,SAAUb,EAAMc,oBAErDb,EAAAC,EAAAC,cAAA,6BACiBF,EAAAC,EAAAC,cAAA,SAAOQ,MAAOX,EAAMe,UAAWF,SAAUb,EAAMgB,sBAEhEf,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQc,KAAK,UAAb,kBCIOC,EAdE,SAAClB,GAChB,OACEC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,SACEQ,MAAOX,EAAMmB,WACbN,SAAUb,EAAMoB,yCCeXC,EApBA,WAEf,OADoBC,IAAMC,IAHV,gBAIDC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAkB1BL,EAfA,SAAAM,GAEX,OADgBL,IAAMM,KARV,eAQwBD,GACrBH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAa9BL,EAVM,SAACQ,GAElB,OADgBP,IAAMQ,OAAN,gBAAAC,OAA6BF,IAC9BL,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAQ9BL,EALA,SAACW,GAEZ,OADgBV,IAAMW,IAAN,GAAAF,OAlBJ,eAkBI,KAAAA,OAAwBC,EAAaH,IAAMG,GAC5CR,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCsJ9BQ,EApKH,WAAM,IAAAC,EACcC,mBAAS,IADvBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACTK,EADSH,EAAA,GACAI,EADAJ,EAAA,GAAAK,EAEcN,mBAAS,IAFvBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAET9B,EAFS+B,EAAA,GAEAC,EAFAD,EAAA,GAAAE,EAGkBT,mBAAS,IAH3BU,EAAAR,OAAAC,EAAA,EAAAD,CAAAO,EAAA,GAGT9B,EAHS+B,EAAA,GAGEC,EAHFD,EAAA,GAAAE,EAIoBZ,mBAAS,IAJ7Ba,EAAAX,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GAIT7B,EAJS8B,EAAA,GAIGC,EAJHD,EAAA,GAAAE,EAK0Bf,mBAAS,CAAEgB,KAAM,OAL3CC,EAAAf,OAAAC,EAAA,EAAAD,CAAAa,EAAA,GAKTG,EALSD,EAAA,GAKME,EALNF,EAAA,GAOhBG,oBAAU,WACRC,IAEGjC,KAAK,SAAAkC,GACJjB,EAAWiB,MAEd,IAEH,IA8BMnD,EAAe,SAACP,GAChB2D,OAAOC,QAAP,oBAAA7B,OAAmC/B,EAAMI,QAC3CqD,EACgBzD,EAAM6B,IAAIL,KAAK,WAC3BiB,EAAWD,EAAQqB,OAAQ,SAAAC,GAAM,OAAIA,EAAOjC,KAAO7B,EAAM6B,SA6FjE,OACE5B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAC4D,EAAD,CACE5C,WAAYA,EACZC,oBATsB,SAAC4C,GAC3Bd,EAAcc,EAAMC,OAAOtD,UAUzBV,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAvIiB,SAACH,GACpB,OAA2B,OAAvBA,EAAMkE,QAAQd,KACT,KAGLnD,EAAAC,EAAAC,cAAA,OAAKgE,UAAWnE,EAAMkE,QAAQE,OAC3BpE,EAAMkE,QAAQd,OAiInB,CAAcc,QAASZ,IACvBrD,EAAAC,EAAAC,cAACkE,EAAD,CACE3D,QAjGU,SAACsD,GACfA,EAAMM,iBACN,IAAMC,EAAa,CACjB1C,GAAIW,EAAQgC,OAASlC,OAAAmC,EAAA,EAAAnC,CAAIE,GAASkC,KAAK,SAACxE,EAAGyE,GAAJ,OAAUA,EAAE9C,GAAK3B,EAAE2B,KAAI,GAAGA,GAAK,EAAI,EAC1EzB,KAAMQ,EACNP,OAAQU,EACR6D,MAAM,IAAIC,MAAOC,eAGfC,GAAK,EAQT,GANAvC,EAAQwC,QAAQ,SAAUlB,GACpBlD,IAAYkD,EAAO1D,OACrB2E,GAAK,MAIE,IAAPA,EAEFtB,EACUc,GACP/C,KAAK,SAAAyD,GACJxC,EAAWD,EAAQT,OAAOkD,IAC1BrC,EAAW,IACXG,EAAa,IACbQ,EACE,CACEH,KAAI,cAAArB,OAAanB,EAAb,0BACJwD,MAAO,YAGXc,WAAW,WACT3B,EAAiB,CAAEH,KAAM,QACxB,OAEF+B,MAAM,SAAAC,GACP7B,EACE,CACEH,KAAI,GAAArB,OAAKqD,EAAM3D,SAASC,KAAK0D,MAAzB,KACJhB,MAAO,SAGXc,WAAW,WACT3B,EAAiB,CAAEH,KAAM,QACxB,WAKF,CACL,IAAMU,EAAStB,EAAQ6C,KAAK,SAAAC,GAAC,OAAIA,EAAElF,OAASQ,IACtC2E,EAAajD,OAAAkD,EAAA,EAAAlD,CAAA,GAAQwB,EAAR,CAAgBzD,OAAQU,IAE3C0C,EACU8B,GAAe/D,KAAK,SAAAiE,GAC1BhD,EAAWD,EAAQkD,IAAI,SAAAC,GAAM,OAAIA,EAAO9D,KAAOiC,EAAOjC,GAAK8D,EAASF,OAGrEN,MAAM,SAAAC,GACLQ,QAAQC,IAAIT,GACZ7B,EACE,CACEH,KAAI,eAAArB,OAAiBwD,EAAcnF,KAA/B,mCACJgE,MAAO,SAGXc,WAAW,WACT3B,EAAiB,CAAEH,KAAM,QACxB,KAEHX,EAAWD,EAAQqB,OAAO,SAAAyB,GAAC,OAAIA,EAAEzD,KAAOiC,EAAOjC,UA4BjDjB,QAASA,EACTE,iBAxBmB,SAACkD,GACxBpB,EAAWoB,EAAMC,OAAOtD,QAwBpBI,UAAWA,EACXC,mBAtBqB,SAACgD,GAC1BjB,EAAaiB,EAAMC,OAAOtD,UAuBxBV,EAAAC,EAAAC,cAAA,qBAlIKqC,EAAQqB,OAAO,SAAAC,GACpB,OAAI3C,EAAWqD,QACNV,EAAO1D,KAAK0F,cAAcC,SAAS5E,EAAW2E,iBAMxBJ,IAAI,SAAAtF,GAAI,OACzCH,EAAAC,EAAAC,cAAC6F,EAAD,CACEC,IAAK7F,EAAKyB,GACVzB,KAAMA,EACNC,OAAQD,EAAKC,OACbE,aAAcA,cCxCpB2F,IAASC,OACPlG,EAAAC,EAAAC,cAACiG,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.eeb3bcf5.chunk.js","sourcesContent":["import React from 'react'\n\nconst Name = (props) => {\n\n\n  return (\n    <li>{props.name.name} {props.name.number}\n      <button onClick={() => props.deletePerson(props.name)}>\n        poista\n      </button>\n    </li>\n  )\n}\n\nexport default Name","import React from 'react'\n\nconst AddForm = (props) => {\n  return (\n    <form onSubmit={props.addName}>\n      <div>\n        nimi: <input value={props.newName} onChange={props.handleNameChange} />\n      </div>\n      <div>\n        puhelinnumero: <input value={props.newNumber} onChange={props.handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  )\n}\n\nexport default AddForm","import React from 'react'\n\nconst LookForm = (props) => {\n  return (\n    <div>\n      <form >\n        <input\n          value={props.newLookFor}\n          onChange={props.handleLookForChange}\n        />\n      </form >\n    </div>\n  )\n}\n\n\nexport default LookForm","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\nreturn request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n};\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`/api/persons/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (personObject) => { \n    const request = axios.put(`${baseUrl}/${personObject.id}`, personObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, update }","import React, { useState, useEffect } from 'react'\nimport Name from './components/Name'\nimport AddForm from './components/Form'\nimport LookForm from './components/LookForm'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newLookFor, setNewLookFor] = useState('')\n  const [messageToUser, setMessageToUser] = useState({ text: null })\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const Notification = (props) => {\n    if (props.message.text === null) {\n      return null\n    } else {\n      return (\n        <div className={props.message.style}>\n          {props.message.text}\n        </div>\n      )\n    }\n  }\n\n  const personsToShow = () => {\n    return persons.filter(person => {\n      if (newLookFor.length) {\n        return person.name.toLowerCase().includes(newLookFor.toLowerCase())\n      }\n      return true\n    })\n  }\n\n  const rows = () => personsToShow().map(name =>\n    <Name\n      key={name.id}\n      name={name}\n      number={name.number}\n      deletePerson={deletePerson}\n    />\n  )\n\n  const deletePerson = (props) => {\n    if (window.confirm(`Olet poistamassa ${props.name}`)) {\n      personService\n        .deletePerson(props.id).then(() => {\n          setPersons(persons.filter((person => person.id !== props.id)))\n\n        })\n    }\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      id: persons.length ? [...persons].sort((a, b) => b.id - a.id)[0].id + 1 : 1,\n      name: newName,\n      number: newNumber,\n      date: new Date().toISOString(),\n    }\n\n    let ok = true\n\n    persons.forEach(function (person) {\n      if (newName === person.name) {\n        ok = false\n      }\n    });\n\n    if (ok === true) {\n\n      personService\n        .create(nameObject)\n        .then(createdPerson => {\n          setPersons(persons.concat(createdPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessageToUser(\n            {\n              text: `Henkilö ${newName} lisätty luetteloon`,\n              style: 'success'\n            }\n          )\n          setTimeout(() => {\n            setMessageToUser({ text: null })\n          }, 5000)\n\n        }).catch(error => {\n          setMessageToUser(\n            {\n              text: `${error.response.data.error} `,\n              style: 'fail'\n            }\n          )\n          setTimeout(() => {\n            setMessageToUser({ text: null })\n          }, 5000)\n\n          //setPersons(persons.filter(p => p.id !== person.id))\n        })\n\n    } else {\n      const person = persons.find(p => p.name === newName)\n      const changedPerson = { ...person, number: newNumber }\n\n      personService\n        .update(changedPerson).then(returnedPerson => {\n          setPersons(persons.map(tyyppi => tyyppi.id !== person.id ? tyyppi : returnedPerson))\n        })\n\n        .catch(error => {\n          console.log(error)\n          setMessageToUser(\n            {\n              text: `Yhteystieto ${changedPerson.name} on jo valitettavasti poistettu`,\n              style: 'fail'\n            }\n          )\n          setTimeout(() => {\n            setMessageToUser({ text: null })\n          }, 5000)\n\n          setPersons(persons.filter(p => p.id !== person.id))\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleLookForChange = (event) => {\n    setNewLookFor(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Etsi nimellä</h2>\n      <LookForm\n        newLookFor={newLookFor}\n        handleLookForChange={handleLookForChange}\n      />\n      <h2>Puhelinluettelo</h2>\n      <Notification message={messageToUser} />\n      <AddForm\n        addName={addName}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numerot</h2>\n      {rows()}\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\n\nReactDOM.render(\n  <App />, document.getElementById('root')\n)\n"],"sourceRoot":""}